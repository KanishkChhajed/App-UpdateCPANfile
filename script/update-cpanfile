#!perl
use 5.008001;
use strict;
use warnings;
use App::UpdateCPANfile;

my ($command) = shift @ARGV;

if ($command eq 'pin') {
    my $app = App::UpdateCPANfile->new(@ARGV);
    $app->pin_dependencies;
    exit 0;
} elsif ($command eq 'update') {
    my $app = App::UpdateCPANfile->new(@ARGV);
    $app->update_dependencies;
    exit 0;
} else {
    warn 'Usage';
    warn 'Pin Dependencies:    update-cpanfile pin $PATH_TO_CPANFILE $PATH_TO_CPANFILE_SNAPSHOT';
    warn 'Update Dependencies: update-cpanfile update $PATH_TO_CPANFILE';
    exit 1;
}

__END__

=encoding utf-8

=head1 NAME

update-cpanfile - cpanfile updater

=head1 SYNOPSIS

    $ update-cpanfile pin $PATH_TO_CPANFILE $PATH_TO_CPANFILE_SNAPSHOT

Pin package versions in cpanfile to versions in cpanfile.snapshot.

    $ update-cpanfile update $PATH_TO_CPANFILE

Update package versions in cpanfile to latest version in 02packages.txt.